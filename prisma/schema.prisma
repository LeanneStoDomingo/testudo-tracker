// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["referentialIntegrity"]
}

datasource db {
  provider             = "mysql"
  url                  = env("DATABASE_URL")
  referentialIntegrity = "prisma"
}

model Semester {
  id String @id @default(cuid())

  start_date DateTime @unique
  end_date   DateTime @unique

  season Season
  year   Int

  sections Section[]
}

model Department {
  code String @id
  name String

  courses Course[]
}

model Gened {
  code String @id
  name String

  courses Course[]
}

model Professor {
  slug String @id
  name String

  sections Section[]
}

model Course {
  code String @id
  name String

  department     Department @relation(fields: [departmentCode], references: [code])
  departmentCode String

  geneds Gened[]

  sections Section[]
}

model Section {
  id   String @id @default(cuid())
  code String

  course     Course @relation(fields: [courseCode], references: [code])
  courseCode String

  professors Professor[]

  semester   Semester @relation(fields: [semesterId], references: [id])
  semesterId String

  days Day[]
}

model Day {
  id String @id @default(cuid())

  total_seats    Int
  open_seats     Int
  waitlist_seats Int
  holdfile_seats Int

  section   Section @relation(fields: [sectionId], references: [id])
  sectionId String
}

enum Season {
  Spring
  Fall
}
